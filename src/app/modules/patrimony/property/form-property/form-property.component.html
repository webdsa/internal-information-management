<div class="realty">
    @defer () {
    <app-header-title class="header-line" title="Adicionar Novo" textBtn="VER TODOS IMÓVEIS" titleEmphasis="Imóvel"
        description="Preencha corretamente com as informações do novo imóvel." color="#37B582"
        colorLight="#E5FAF5"></app-header-title>
    }
    @defer () {
    <app-card [hasPadding]="true">
        <div class="form-info">
            <h3>INFORMAÇÕES GERAIS</h3>
            <div class="row">
                <app-form-label class="col-4" titleLabel="Código do Imóvel">
                    <input type="number" class="form-control" [(ngModel)]="form.id" />
                    <app-form-msg-error [value]="form.id" [type]="1"></app-form-msg-error>
                </app-form-label>

                <app-form-label class="col-4" titleLabel="Proprietário" [required]="true">
                    <select class="form-select" (change)="selectOwnerName($event.target)">
                        <option value="-0">
                            Selecione o proprietário
                        </option>
                        <option value="CUB" [selected]="form.OwnerName == 'CUB'">
                            CUB
                        </option>
                        <option value="PROASA" [selected]="form.OwnerName == 'PROASA'">
                            PROASA
                        </option>
                        <option value="IAJA" [selected]="form.OwnerName == 'IAJA'">
                            IAJA
                        </option>
                    </select>
                    {{form.OwnerName == 'CUB'}}
                    {{form.OwnerName == 'PROASA'}}
                    {{form.OwnerName == 'IAJA'}}
                </app-form-label>

                <app-form-label class="col-4" titleLabel=" Tipo do Imóvel" [required]="true">
                    <select class="form-select" (change)="selectProperty($event.target)">
                        <option value="-0">
                            Selecione o tipo do imóvel
                        </option>
                        @for (item of typePropertyArray; track $index) {
                        <option value="{{item.value}}" [selected]="form.PropertyType == item.label">
                            {{item.label}}
                        </option>
                        }
                    </select>
                </app-form-label>
            </div>
            <div class="row">
                <app-form-label class="col-3" titleLabel="CEP" [required]="true">
                    <input type="text" class="form-control" [(ngModel)]="form.PostalCode" />
                    <app-form-msg-error [value]="form.PostalCode" [type]="3"></app-form-msg-error>
                </app-form-label>

                <app-form-label class="col-6" titleLabel="Endereço" [required]="true">
                    <input type="text" class="form-control" [(ngModel)]="form.Address" />
                    <app-form-msg-error [value]="form.Address" [type]="3"></app-form-msg-error>
                </app-form-label>

                <app-form-label class="col-3" titleLabel="Complemento">
                    <input type="text" class="form-control" [(ngModel)]="form.Complement" />
                    <app-form-msg-error [value]="form.Complement"></app-form-msg-error>
                </app-form-label>
            </div>
            <div class="row">
                <app-form-label class="col-3" titleLabel="Bairro" [required]="true">
                    <input type="text" class="form-control" [(ngModel)]="form.Neighborhood" />
                    <app-form-msg-error [value]="form.Neighborhood" [type]="3"></app-form-msg-error>
                </app-form-label>
                <app-form-label class="col-3" titleLabel="Cidade" [required]="true">
                    <input type="text" class="form-control" [(ngModel)]="form.City" />
                    <app-form-msg-error [value]="form.City" [type]="3"></app-form-msg-error>
                </app-form-label>

                <app-form-label class="col-1" titleLabel="UF" [required]="true">
                    <input type="text" class="form-control" [(ngModel)]="form.FederativeUnit" />
                    <app-form-msg-error [value]="form.FederativeUnit" [type]="3"></app-form-msg-error>
                </app-form-label>

                <app-form-label class="col-5" titleLabel="Nome do edifício">
                    <input type="text" class="form-control" [(ngModel)]="form.PropertyName" />
                    <app-form-msg-error [value]="form.PropertyName" [type]="3"></app-form-msg-error>
                </app-form-label>
            </div>
        </div>
        <div class="form-detail">
            <h3>DETALHES DO IMÓVEL</h3>
            <div class="row">
                <app-form-label class="col-3" titleLabel="Possuí fotovoltaica?" [required]="true">
                    <select class="form-select" (change)="selectSolarPower($event.target)">
                        <option value="-0">
                            Escolhe uma opção
                        </option>
                        <option value="0" [selected]="detailRealty.hasPhotovoltaic == false">
                            Não
                        </option>
                        <option value="1" [selected]="detailRealty.hasPhotovoltaic == true">
                            Sim
                        </option>
                    </select>
                </app-form-label>

                <app-form-label class="col-3" titleLabel="Qual tipo de gás?" [required]="true">
                    <select class="form-select" (change)="selectGas($event.target)">
                        <option value="-0">
                            Selecione o tipo do gás
                        </option>
                        @for (item of typeGasArray; track $index) {
                        <option value="{{item.value}}" [selected]="form.GasType == item.label">
                            {{item.label}}
                        </option>
                        }
                    </select>
                </app-form-label>

                <app-form-label class="col-3" titleLabel="Quantidade de quartos" [required]="true">
                    <input type="number" class="form-control" [(ngModel)]="detailRealty.qtdRooms" />
                    <app-form-msg-error [value]="detailRealty.qtdRooms" [type]="1"></app-form-msg-error>
                </app-form-label>

                <app-form-label class="col-3" titleLabel="Limite de moradores" [required]="true">
                    <input type="number" class="form-control" [(ngModel)]="detailRealty.limitPeople" />
                    <app-form-msg-error [value]="detailRealty.limitPeople" [type]="1"></app-form-msg-error>
                </app-form-label>
            </div>
            <div class="row">
                <app-form-label class="col-4" titleLabel="Código do cliente - Energia" [required]="true">
                    <input type="text" class="form-control" [(ngModel)]="detailRealty.codEnergy" />
                    <app-form-msg-error [value]="detailRealty.codEnergy" [type]="3"></app-form-msg-error>
                </app-form-label>

                <app-form-label class="col-4" titleLabel="Medidor cliente - Energia" [required]="true">
                    <input type="text" class="form-control" [(ngModel)]="detailRealty.meterEnergy" />
                    <app-form-msg-error [value]="detailRealty.meterEnergy" [type]="3"></app-form-msg-error>
                </app-form-label>

                <app-form-label class="col-4" titleLabel="Código cliente - Água" [required]="true">
                    <input type="text" class="form-control" [(ngModel)]="detailRealty.codWater" />
                    <app-form-msg-error [value]="detailRealty.codWater" [type]="3"></app-form-msg-error>
                </app-form-label>
            </div>
            <div class="row">
                <app-form-label class="col-4" titleLabel="Inscrição municipal">
                    <input type="text" class="form-control" [(ngModel)]="detailRealty.municipalRegister" />
                    <app-form-msg-error [value]="detailRealty.municipalRegister" [type]="3"></app-form-msg-error>
                </app-form-label>

                <app-form-label class="col-4" titleLabel="IPTU/TLP" [required]="true">
                    <select class="form-select" (change)="selectIptu($event.target)">
                        <option value="-0">
                            Selecione uma opção
                        </option>
                        <option value="0" [selected]="detailRealty.propertyTax == 'false'">
                            Não
                        </option>
                        <option value="1" [selected]="detailRealty.propertyTax == 'true'">
                            Sim
                        </option>
                    </select>
                </app-form-label>

                <app-form-label class="col-4" titleLabel="Avaliação do imóvel" [required]="true">
                    <input type="text" class="form-control" [(ngModel)]="detailRealty.realtyValue" />
                    <app-form-msg-error [value]="detailRealty.realtyValue" [type]="3"></app-form-msg-error>
                </app-form-label>
            </div>
        </div>
        <div class="add-informations">
            @if (retractInfo) {
            <div class="btn-info">
                <div class="btns-title" (click)="retractInfo =! retractInfo">
                    <span class="material-symbols-outlined">
                        add
                    </span>
                    <span>
                        Adicionar informações
                    </span>
                </div>
            </div>
            }
            @else {
            <div>
                <h3>INFORMAÇÕES ADICIONAIS</h3>
                <div class="row">
                    <app-form-label class="col-4" titleLabel="Numero de Telefone" [required]="false">
                        <input type="text" class="form-control" [(ngModel)]="detailRealty.numberPhone" />
                        <app-form-msg-error [value]="detailRealty.numberPhone" [type]="1"></app-form-msg-error>
                    </app-form-label>

                    <app-form-label class="col-4" titleLabel="Telefone da portaria " [required]="false">
                        <input type="text" class="form-control" [(ngModel)]="detailRealty.numberPhone2" />
                        <app-form-msg-error [value]="detailRealty.numberPhone2" [type]="3"></app-form-msg-error>
                    </app-form-label>

                    <app-form-label class="col-4" titleLabel="Email da portaria" [required]="false">
                        <input type="email" class="form-control" [(ngModel)]="detailRealty.emailConcierge" />
                        <app-form-msg-error [value]="detailRealty.emailConcierge" [type]="3"></app-form-msg-error>
                    </app-form-label>
                </div>
                <div class="row">
                    <app-form-label class="col-12" titleLabel="Observações" [required]="false">
                        <textarea class="form-control" [(ngModel)]="detailRealty.observations" rows="3"></textarea>
                    </app-form-label>
                </div>
            </div>
            <div class="btn-info">
                <div class="btns-title" (click)="retractInfo =! retractInfo">
                    <span class="material-symbols-outlined">
                        remove
                    </span>
                    <span>
                        Ocultar informações
                    </span>
                </div>
            </div>
            }
        </div>
        <div class="btn">
            <button type="button" class="btn btn-light">Cancelar</button>
            <button type="button" class="btn btn-primary" (click)="saveProperty()">Salvar</button>
        </div>
    </app-card>
    }
</div>